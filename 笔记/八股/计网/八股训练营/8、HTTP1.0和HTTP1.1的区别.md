

### 1. 持久连接

**HTTP/1.0**:
- 默认情况下，HTTP/1.0使用短连接（非持久连接），这意味着每次HTTP请求都会建立一个新的TCP连接。
- 在处理完请求后，连接会立即关闭。
- 如果需要使用持久连接，可以通过在请求头中添加 `Connection: keep-alive` 实现。

**HTTP/1.1**:
- 默认支持持久连接（长连接），即在一个TCP连接上可以发送多个HTTP请求和响应。
- 这样可以减少频繁建立和关闭连接的开销，提高网络效率。
- 通过在响应头中发送 `Connection: close` 可以关闭持久连接。

```ad-tip
主要的区别就在于默认的连接模式不同
```

---
### 2. 管道化

**HTTP/1.0**:
- 不支持管道化。

**HTTP/1.1**:
- 支持管道化（但不是默认开启）。
- 允许客户端在第一个请求的响应到达之前发送多个请求，从而减少等待时间，提高效率。

```ad-example
例如，浏览器可以同时发送多个资源请求，而不必等待每个资源的响应。
```

---
### 3. 缓存控制

**HTTP/1.0**:
- 使用 `If-Modified-Since` 和 `Expires` 头来进行缓存判断。
- 这些头部用于确定资源是否在客户端缓存中是最新的。

**HTTP/1.1**:
- 引入了更多的缓存控制策略，例如 `Etag` 和 `If-None-Match`。
- `Etag` 是资源的唯一标识符，用于判断资源是否被修改过。
- `If-None-Match` 用于与服务器进行缓存验证，如果资源没有改变，服务器返回304 Not Modified 状态码。

```ad-tip
`Expires` 头和 `If-Modified-Since` 配套使用

`Etag` 和 `If-None-Match`配套使用
```

---
### 4. 错误处理

**HTTP/1.0**:
- 状态码较少，错误处理相对简单。

**HTTP/1.1**:
- 增加了更多的HTTP状态码，例如 `100 Continue`，用于请求的中间响应。
- `100 Continue` 告诉客户端请求的初步部分已经被服务器接收，并且客户端应继续请求或忽略响应。

```ad-tip
HTTP状态码 `100 Continue` 是 HTTP/1.1 中引入的一种临时响应码，用于在客户端发送较大的请求体之前，先确认服务器是否愿意接受请求。这可以防止客户端在服务器拒绝请求时浪费带宽。详细解释如下：

### 使用场景

1. **大请求体**：当客户端需要发送一个较大的请求体（如上传大文件）时，先发送请求头，并包含 `Expect: 100-continue` 头，询问服务器是否愿意接收请求体。
2. **服务器确认**：服务器接收到包含 `Expect: 100-continue` 头的请求后，检查请求头是否合规、是否满足业务逻辑等。
3. **继续或拒绝**：
    - 如果请求头通过验证，服务器返回 `100 Continue` 响应码，表示可以继续发送请求体。
    - 如果请求头未通过验证，服务器返回4xx或5xx错误码，表示请求被拒绝，客户端不需要发送请求体。

### 优点：节省带宽
```

---
### 5. Host 头

**HTTP/1.0**:
- 没有 `Host` 头字段。

**HTTP/1.1**:
- 引入了 `Host` 头字段。
- 允许客户端指定请求的主机名，使得在同一台服务器上托管多个域名成为可能。


```ad-tip
title: 一台服务器托管多个域名

HTTP/1.1

    GET /index.html HTTP/1.1
    Host: www.example.com

- `Host` 头允许服务器区分请求的目标域名，使得在同一台服务器上托管多个域名成为可能。这种技术被称为“虚拟主机”或“虚拟托管”。
- 例如，单台服务器可以托管多个网站，如 `www.example.com` 和 `www.anotherexample.com`，它们共享相同的 IP 地址。
- `Host` 头是必需的，没有 `Host` 头的请求将会导致400 Bad Request 错误。
```

---
### 6. 带宽优化

**HTTP/1.0**:
- 存在浪费带宽的现象，例如客户端只需要某个对象的一部分，而服务器却将整个对象发送过来。
- 不支持断点续传功能。

**HTTP/1.1**:
- 在请求头中引入了 `Range` 头域。
- 允许客户端请求资源的某个部分，而不是整个资源。
- 服务器返回的状态码是 `206 Partial Content`，表示部分内容响应。

```ad-example
title: Range示例
### 实际示例

#### 客户端请求某个范围的资源：

假设客户端想要下载一个文件 `largefile.zip` 的第1000到1999字节：

    GET /largefile.zip HTTP/1.1
    Host: www.example.com
    Range: bytes=1000-1999

#### 服务器响应：

服务器接收到请求后，返回状态码 `206 Partial Content`，并发送指定范围内的内容：


    HTTP/1.1 206 Partial Content
    Content-Range: bytes 1000-1999/10000
    Content-Length: 1000
    Content-Type: application/zip
    
    [第1000到1999字节的数据]

通过这个功能，还可以实现断点重传功能
```