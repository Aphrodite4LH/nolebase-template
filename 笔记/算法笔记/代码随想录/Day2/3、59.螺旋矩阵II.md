# 59.螺旋矩阵II
## 题目

### 题目链接
[59. 螺旋矩阵 II - 力扣（LeetCode）](https://leetcode.cn/problems/spiral-matrix-ii/description/)


### 题目描述
给你一个正整数 `n` ，生成一个包含 `1` 到 `n2` 所有元素，且元素按顺时针顺序螺旋排列的 `n x n` 正方形矩阵 `matrix` 。

- 示例一
```text
输入：n = 3
输出：[[1,2,3],[8,9,4],[7,6,5]]
```
![[../../../../images/Pasted image 20240718182227.png]]
- 示例二
```text
输入：n = 1
输出：[[1]]
```

---

## 解答

```Cpp
class Solution {
   public:
    vector<vector<int>> generateMatrix(int n) {
        int origin = n;
        int circle = (n + 1) / 2;  // 圈数
        int index  = 1;            // 1~n^2
        vector<vector<int>> result(n, vector<int>(n));
        for (int i = 0; i < circle; i++) {
            // 从左到右
            for (int LtoR = i; LtoR < i + n - 1; LtoR++) {
                result[i][LtoR] = index++;
            }
            // 从上到下
            for (int TtoB = i; TtoB < i + n - 1; TtoB++) {
                result[TtoB][i + n - 1] = index++;
            }
            // 从右到左
            for (int RtoL = i + n - 1; RtoL > i; RtoL--) {
                result[i + n - 1][RtoL] = index++;
            }
            // 从下到上
            for (int BtoT = i + n - 1; BtoT > i; BtoT--) {
                result[BtoT][i] = index++;
            }
            n -= 2;
        }
        // 如果n是奇数，则最中间的点要手动赋值
        if (n == -1) {
            result[origin / 2][origin / 2] = index;
        }
        return result;
    }
};
```

>[!tip] 复杂度
>时间复杂度为：$O(n^2)$
>
>空间复杂度为：$O(1)$

---
## 解析

先计算要填充的圈数：`n=5`的`5*5`矩阵要循环三圈，`n=3`则是两圈

对于每一圈，都要执行从左到右、从上到下、从右到左、从下到上按顺序遍历四条边

每一圈都要坚持**区间不变量**的原则：我的代码中坚持的是每条边在处理时不管最后一个元素，即如果这条边有`n`个元素，则处理这条边时只处理这条边的前`n-1`个元素，第`n`个元素被当作下一条边的首元素处理。

代码中我将`n`视作在本圈处理中每一条边的长度，因此最外层的每次循环后，`n`都自减2

通过`i`(圈数)与`n`(边长度)可以轻松确定本圈中每条边的起始与终止位置